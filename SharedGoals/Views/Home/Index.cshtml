@{
    ViewData["Title"] = "Home Page";
}

@inject ICreatorService creators
@inject IUserService users

<div class="jumbotron text-center">
    <h2 class="display-4">
        Hello,
        @if (this.User.IsAdmin())
        {
            <text>Admin!</text>
        }
        else if (this.User.Identity.IsAuthenticated && this.creators.IsCreator(this.User.Id()))
        {
            var name = this.creators.GetCreatorName(this.User.Id());
            <text>@name!</text>
        }
        else if (this.User.Identity.IsAuthenticated && !this.creators.IsCreator(this.User.Id()))
        {
            var name = this.users.GetFirstName(this.User.Id());
            <text>@name!</text>
        }
        else
        {
            <text>Guest!</text>
        }
    </h2>
    <p class="lead mb-0 mt-3">This is your free goal tracker - reach your goals <b>today</b>.</p>
    @if (this.User.Identity.IsAuthenticated && this.creators.IsCreator(this.User.Id()))
    {
        <p class="lead mt-0">You have a special role - you are a <b>creator</b>.</p>
    }
    <hr class="my-4">
    @if (!this.User.Identity.IsAuthenticated)
    {
        <p>
            <a class="btn btn-primary btn-lg" href="/Identity/Account/Login" role="button">Login</a>
            <a class="btn btn-primary btn-lg" href="/Identity/Account/Register" role="button">Register</a>
        </p>
    }
    else
    {
        <p class="lead">
            <a class="btn btn-primary btn-lg" href="/Goals/All" role="button">All Goals</a>
            @if (this.creators.IsCreator(this.User.Id()) || this.User.IsAdmin())
            {
                <a class="btn btn-primary btn-lg" href="/Goals/Create" role="button">Create Goal</a>
            }
        </p>
    }
</div>
